////////////////////////////////////////////////////////////////////////////////////////////////
// vim: set filetype=cpp autoindent noexpandtab tabstop=4 shiftwidth=4 foldmethod=marker :
// (c) 2010 Anton Povarov <anton.povarov@gmail.com>
////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef MEOW_CONVERT__WHATEVER_CAST_HPP_
#define MEOW_CONVERT__WHATEVER_CAST_HPP_

#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_convertible.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////
namespace meow {
////////////////////////////////////////////////////////////////////////////////////////////////

	template<class To, class From, class Enabler = void>
	struct whatever_cast;

	template<class T>
	struct whatever_cast<T, T>
	{
		void operator()(T& to, T const& from) const { to = from; }
	};

	template<class To, class From>
	struct whatever_cast<To, From, typename boost::enable_if<boost::is_convertible<From, To> >::type>
	{
		void operator()(T& to, T const& from) const { to = from; }
	}

////////////////////////////////////////////////////////////////////////////////////////////////
} // namespace meow {
////////////////////////////////////////////////////////////////////////////////////////////////

#endif // MEOW_CONVERT__WHATEVER_CAST_HPP_

