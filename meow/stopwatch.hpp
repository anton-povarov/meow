////////////////////////////////////////////////////////////////////////////////////////////////
// vim: set filetype=cpp autoindent noexpandtab tabstop=4 shiftwidth=4 foldmethod=marker :
// (c) 2011 Anton Povarov <anton.povarov@gmail.com>
////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef MEOW__STOPWATCH_HPP_
#define MEOW__STOPWATCH_HPP_

#include <meow/unix/time.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////
namespace meow {
////////////////////////////////////////////////////////////////////////////////////////////////

	struct stopwatch_t
	{
		timeval_t start_tv;

		stopwatch_t(bool start = true)
		{
			if (start)
				reset();
		}

		void reset()
		{
			start_tv = now();
		}

		timeval_t now() const
		{
			return os_unix::clock_monotonic_now();
		}

		timeval_t stamp() const
		{
			return now() - start_tv;
		}
	};

////////////////////////////////////////////////////////////////////////////////////////////////
} // namespace meow {
////////////////////////////////////////////////////////////////////////////////////////////////

#endif // MEOW__STOPWATCH_HPP_

